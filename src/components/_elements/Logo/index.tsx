import React from 'react';
import SiteLink from '~/components/_core/SiteLink';
import { classnames } from '~/utils/global';
import { parseOpacityValue } from '~/utils/styles';
import styles from './logo.module.css';
import { LogoSvg } from './LogoSvg';

type PercentageOpacity = `${number}%`;
type DecimalOpacity = `0` | `1` | `${0 | 1}.${number}`;
type OpacityValue = PercentageOpacity | DecimalOpacity;

type LogoProps = {
  label?: string,
  link?: {
    href: string | boolean,
    label: string,
  },
  opacity?: OpacityValue,
  classes?: {
    container?: string,
    svg?: string,
  },
  style?: {
    container?: React.CSSProperties,
    svg?: React.CSSProperties & {
      opacity?: number | string;
    };
  }
};

/**
 * Lumino Logo component.
 * @param {LogoProps} props Props for the Logo component.
 * @returns {React.ReactElement} The Logo component.
*/

const Logo = ({ label = "Lumino Logo", link, opacity, classes = {}, style = {}, ...props }: LogoProps) => {

  const backgroundImage = "&quot;data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20viewBox%3D%220%200%20131%2040%22%3E%3Cpath%20d%3D%22M%2088.984%2013.57%20L%2088.984%2026.419%20C%2088.984%2026.808%2089.302%2027.126%2089.692%2027.126%20C%2090.082%2027.126%2090.4%2026.808%2090.4%2026.419%20L%2090.4%2013.57%20C%2090.4%2013.181%2090.082%2012.863%2089.692%2012.863%20C%2089.302%2012.863%2088.984%2013.181%2088.984%2013.57%20M%2094.863%2013.57%20L%2094.863%2026.419%20C%2094.863%2026.808%2095.181%2027.126%2095.571%2027.126%20C%2095.96%2027.126%2096.279%2026.808%2096.279%2026.419%20L%2096.279%2013.57%20C%2096.279%2013.181%2095.96%2012.863%2095.571%2012.863%20C%2095.181%2012.863%2094.863%2013.181%2094.863%2013.57%20M%20107.725%2013.57%20L%20107.725%2026.419%20C%20107.725%2026.808%20108.044%2027.126%20108.434%2027.126%20C%20108.823%2027.126%20109.142%2026.808%20109.142%2026.419%20L%20109.142%2013.57%20C%20109.142%2013.181%20108.823%2012.863%20108.434%2012.863%20C%20108.044%2012.863%20107.725%2013.181%20107.725%2013.57%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%20108.936%2025.917%20L%2096.099%2013.072%20C%2095.822%2012.796%2095.373%2012.796%2095.096%2013.072%20C%2094.82%2013.347%2094.82%2013.797%2095.096%2014.073%20L%20107.934%2026.918%20C%20108.21%2027.194%20108.66%2027.194%20108.936%2026.918%20C%20109.213%2026.642%20109.213%2026.196%20108.936%2025.917%20M%2071.248%2013.57%20L%2071.248%2026.419%20C%2071.248%2026.808%2071.567%2027.126%2071.956%2027.126%20C%2072.346%2027.126%2072.664%2026.808%2072.664%2026.419%20L%2072.664%2013.57%20C%2072.664%2013.181%2072.346%2012.863%2071.956%2012.863%20C%2071.567%2012.863%2071.248%2013.181%2071.248%2013.57%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%2078.568%2018.868%20L%2072.441%2013.057%20C%2072.158%2012.789%2071.708%2012.799%2071.439%2013.082%20C%2071.17%2013.365%2071.181%2013.814%2071.464%2014.083%20L%2077.591%2019.894%20C%2077.874%2020.163%2078.324%2020.152%2078.593%2019.869%20C%2078.862%2019.586%2078.851%2019.141%2078.568%2018.868%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%2078.596%2019.894%20L%2084.723%2014.083%20C%2085.007%2013.814%2085.017%2013.365%2084.748%2013.082%20C%2084.479%2012.799%2084.029%2012.789%2083.746%2013.057%20L%2077.619%2018.868%20C%2077.336%2019.137%2077.325%2019.586%2077.594%2019.869%20C%2077.863%2020.152%2078.313%2020.166%2078.596%2019.894%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%2083.498%2013.57%20L%2083.498%2026.419%20C%2083.498%2026.808%2083.817%2027.126%2084.206%2027.126%20C%2084.596%2027.126%2084.914%2026.808%2084.914%2026.419%20L%2084.914%2013.57%20C%2084.914%2013.181%2084.596%2012.863%2084.206%2012.863%20C%2083.817%2012.863%2083.498%2013.181%2083.498%2013.57%20M%2056.097%2026.419%20L%2056.097%2013.57%20C%2056.097%2013.181%2055.779%2012.863%2055.389%2012.863%20C%2054.999%2012.863%2054.681%2013.181%2054.681%2013.57%20L%2054.681%2026.419%20C%2054.681%2026.808%2054.999%2027.126%2055.389%2027.126%20C%2055.779%2027.126%2056.097%2026.808%2056.097%2026.419%20M%2067.735%2023.668%20L%2067.735%2013.57%20C%2067.735%2013.181%2067.416%2012.863%2067.026%2012.863%20C%2066.637%2012.863%2066.318%2013.181%2066.318%2013.57%20L%2066.318%2023.664%20C%2066.318%2024.053%2066.637%2024.371%2067.026%2024.371%20C%2067.416%2024.371%2067.735%2024.057%2067.735%2023.668%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%2055.389%2027.126%20L%2064.579%2027.126%20C%2064.951%2027.13%2065.323%2027.08%2065.684%2026.978%20C%2065.971%2026.893%2066.247%2026.762%2066.492%2026.592%20C%2066.69%2026.454%2066.867%2026.288%2067.016%2026.104%20C%2067.136%2025.956%2067.242%2025.793%2067.327%2025.623%20C%2067.469%2025.344%2067.572%2025.047%2067.632%2024.739%20C%2067.703%2024.385%2067.738%2024.028%2067.735%2023.671%20L%2066.318%2023.671%20C%2066.318%2024.156%2066.251%2024.52%2066.152%2024.785%20C%2066.091%2024.951%2066.003%2025.107%2065.89%2025.245%20C%2065.819%2025.326%2065.737%2025.397%2065.645%2025.457%20C%2065.5%2025.549%2065.341%2025.616%2065.174%2025.652%20C%2064.979%2025.698%2064.778%2025.719%2064.576%2025.715%20L%2055.389%2025.715%20Z%20M%2041.814%2013.57%20L%2041.814%2026.419%20C%2041.814%2026.808%2042.133%2027.126%2042.523%2027.126%20C%2042.912%2027.126%2043.231%2026.808%2043.231%2026.419%20L%2043.231%2013.57%20C%2043.231%2013.181%2042.912%2012.863%2042.523%2012.863%20C%2042.133%2012.863%2041.814%2013.181%2041.814%2013.57%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cpath%20d%3D%22M%2049.567%2025.712%20L%2042.523%2025.712%20C%2042.133%2025.712%2041.814%2026.03%2041.814%2026.419%20C%2041.814%2026.808%2042.133%2027.126%2042.523%2027.126%20L%2049.567%2027.126%20C%2049.956%2027.126%2050.275%2026.808%2050.275%2026.419%20C%2050.275%2026.03%2049.96%2025.712%2049.567%2025.712%20M%20119.097%2014.03%20L%20119.097%2014.737%20L%20125.836%2014.737%20C%20127.898%2014.734%20129.566%2016.4%20129.569%2018.458%20L%20129.569%2021.524%20C%20129.573%2023.579%20127.905%2025.248%20125.847%2025.252%20L%20119.097%2025.252%20C%20117.039%2025.256%20115.368%2023.59%20115.364%2021.535%20L%20115.364%2018.465%20C%20115.361%2016.407%20117.029%2014.741%20119.09%2014.737%20L%20119.097%2014.737%20L%20119.097%2013.323%20C%20116.257%2013.319%20113.951%2015.618%20113.948%2018.454%20L%20113.948%2021.524%20C%20113.944%2024.361%20116.246%2026.663%20119.086%2026.667%20L%20125.836%2026.667%20C%20128.677%2026.67%20130.982%2024.371%20130.986%2021.535%20L%20130.986%2018.465%20C%20130.989%2015.629%20128.687%2013.326%20125.847%2013.323%20L%20119.097%2013.323%20Z%22%20fill%3D%22rgb(255%2C255%2C255)%22%3E%3C%2Fpath%3E%3Cg%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22idss3292615866_8g-1295957116%22%20x1%3D%220.49751243781094523%22%20x2%3D%220.5024875621890548%22%20y1%3D%220%22%20y2%3D%221%22%3E%3Cstop%20offset%3D%220%22%20stopColor%3D%22rgb(0%2C217%2C139)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3Cstop%20offset%3D%221%22%20stopColor%3D%22rgb(0%2C240%2C255)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M%2038.004%2039.989%20C%2034.891%2037.461%2026.678%2032.4%2018.72%2032.4%20C%2011.775%2032.4%204.923%2036.251%201.346%2038.914%20L%201.342%2038.918%20C%200.822%2039.307%200.368%2039.668%20-0.004%2039.989%20C%200.018%2039.961%200.035%2039.929%200.057%2039.901%20C%205.071%2032.47%208.85%2025.751%2011.652%2019.986%20C%2011.652%2019.982%2011.655%2019.979%2011.655%2019.975%20C%2012.505%2018.225%2013.266%2016.562%2013.943%2014.996%20C%2014.308%2014.15%2014.648%2013.333%2014.966%2012.548%20C%2014.966%2012.545%2014.97%2012.541%2014.97%2012.541%20C%2015.823%2010.426%2016.51%208.513%2017.052%206.826%20C%2017.314%206.019%2017.541%205.266%2017.736%204.562%20C%2017.739%204.555%2017.739%204.548%2017.743%204.545%20C%2017.768%204.453%2017.796%204.361%2017.821%204.269%20L%2017.821%204.262%20C%2018.246%202.713%2018.515%201.439%2018.66%200.47%20C%2018.66%200.456%2018.664%200.446%2018.667%200.431%20C%2018.688%200.279%2018.71%200.138%2018.724%200.004%20C%2018.858%201.613%2019.202%203.367%2019.712%205.224%20C%2021.228%2010.752%2024.217%2017.164%2027.5%2023.165%20C%2031.194%2029.913%2035.252%2036.138%2038.004%2039.989%20Z%22%20fill%3D%22url(%23idss3292615866_8g-1295957116)%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3Cg%20transform%3D%22translate(19.642%205.22)%22%20id%3D%22ss3292615866_9%22%3E%3Cpath%20d%3D%22M%207.857%2017.945%20C%206.2%2017.068%203.898%2013.768%202.124%209.503%20C%200.502%205.606%20-0.235%201.97%200.066%200%20C%201.585%205.531%204.574%2011.943%207.857%2017.945%20Z%22%20fill%3D%22rgb(15%2C8%2C57)%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3Cg%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22idss3292615866_11g-1792596619%22%20x1%3D%220.6986500235934945%22%20x2%3D%220.3013499764065054%22%20y1%3D%220%22%20y2%3D%221%22%3E%3Cstop%20offset%3D%220%22%20stopColor%3D%22rgb(5%2C5%2C5)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3Cstop%20offset%3D%221%22%20stopColor%3D%22rgb(199%2C248%2C255)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M%2015.558%2023.841%20C%2019.804%2016.608%2019.113%205.45%2018.72%200%20C%2016.578%2013.807%205.1%2032.4%200%2039.989%20C%203.69%2037.139%2012.091%2029.751%2015.558%2023.841%20Z%22%20fill%3D%22url(%23idss3292615866_11g-1792596619)%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3Cg%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22idss3292615866_12g-2054350688%22%20x1%3D%220.6835446893961477%22%20x2%3D%220.31645531060385224%22%20y1%3D%220%22%20y2%3D%221%22%3E%3Cstop%20offset%3D%220%22%20stopColor%3D%22rgb(29%2C28%2C106)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3Cstop%20offset%3D%221%22%20stopColor%3D%22rgb(12%2C4%2C60)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M%2018.72%200%20C%2018.703%200.145%2018.681%200.286%2018.664%200.428%20C%2018.664%200.442%2018.66%200.453%2018.657%200.467%20C%2018.334%202.872%2018.023%204.785%2017.693%206.412%20C%2016.882%2010.384%2015.93%2012.69%2014.262%2016.46%20C%2014.088%2016.849%2013.911%2017.252%2013.723%2017.676%20C%2011.343%2023.031%202.603%2036.831%20-0%2039.989%20C%200.305%2039.431%209.845%2023.586%2011.68%2019.714%20C%2012.406%2018.186%2013.178%2016.58%2013.939%2014.886%20C%2014.283%2014.122%2014.626%2013.34%2014.963%2012.541%20C%2014.963%2012.538%2014.966%2012.534%2014.966%2012.534%20C%2015.398%2011.505%2015.82%2010.444%2016.22%209.351%20C%2016.525%208.513%2016.819%207.657%2017.095%206.78%20C%2017.353%205.959%2017.594%205.118%2017.817%204.262%20L%2017.817%204.255%20C%2017.87%204.053%2017.92%203.851%2017.97%203.65%20C%2017.977%203.618%2017.987%203.586%2017.994%203.554%20C%2018.278%202.405%2018.522%201.22%2018.72%200%20Z%22%20fill%3D%22url(%23idss3292615866_12g-2054350688)%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3Cpath%20d%3D%22M%2017.693%206.412%20C%2016.882%2010.384%2015.93%2012.69%2014.262%2016.46%20C%2014.056%2016.177%2013.95%2015.689%2013.943%2015.059%20L%2013.943%2014.886%20C%2014.286%2014.122%2014.63%2013.34%2014.966%2012.541%20C%2014.966%2012.538%2014.97%2012.534%2014.97%2012.534%20C%2015.823%2010.419%2016.51%208.506%2017.052%206.819%20C%2017.063%206.808%2017.074%206.801%2017.084%206.79%20L%2017.095%206.78%20C%2017.304%206.599%2017.506%206.472%2017.693%206.412%20Z%22%20fill%3D%22rgb(255%2C255%2C255)%22%20opacity%3D%220.47%22%3E%3C%2Fpath%3E%3Cg%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22idss3292615866_14g1162291581%22%20x1%3D%220.23478745943835022%22%20x2%3D%220.7652125405616498%22%20y1%3D%220%22%20y2%3D%221%22%3E%3Cstop%20offset%3D%220%22%20stopColor%3D%22rgb(0%2C255%2C194)%22%20stopOpacity%3D%221%22%3E%3C%2Fstop%3E%3Cstop%20offset%3D%221%22%20stopColor%3D%22rgba(255%2C255%2C255%2C0.65)%22%20stopOpacity%3D%220.65%22%3E%3C%2Fstop%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Cpath%20d%3D%22M%2022.956%2024.453%20C%2021.203%2021.599%2019.946%2018.341%2019.333%2013.857%20C%2021.27%2022.108%2025.155%2027.763%2031.728%2034.235%20C%2026.221%2029.291%2024.709%2027.303%2022.956%2024.453%20Z%22%20fill%3D%22url(%23idss3292615866_14g1162291581)%22%3E%3C%2Fpath%3E%3C%2Fg%3E%3C%2Fsvg%3E&quot";

  const logoStyles = {
    backgroundImage: `url(${backgroundImage})`,
    opacity: parseOpacityValue(opacity ? opacity : style?.svg?.opacity ? String(style?.svg?.opacity) : 1), // Prioritize 'opacity' prop over the 'style.svg.opacity' prop.
    ...style?.svg
  };

  const container = {
    class: classnames(styles.container, classes?.container),
    style: style?.container,
  };

  const svg = {
    class: classnames(styles.svg, classes?.svg),
    style: logoStyles,
  };

  const linkHref = link && link.href !== false ? (link.href === true ? '/' : link.href) : undefined;

  const LogoLink = ({ children }:{ children: React.ReactNode }) => (
    <SiteLink label={link?.label} href={linkHref ?? '/'}>
      {children}
    </SiteLink>
  );

  const SvgElement = () => <LogoSvg aria-label={label} className={svg.class} style={svg.style}  />;

  return (
    <>
      <div className={container.class} style={container.style} {...props}>
        { linkHref ? <LogoLink><SvgElement /></LogoLink> : <SvgElement /> }
      </div>
    </>
  );
}

export default Logo;